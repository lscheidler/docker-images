---
- hosts: localhost
  connection: local
  tasks:
    - name: include variables
      include_vars: vars.yml
    - name: download solr
      get_url:
        url: "{{ solr_mirror }}/{{ solr_version }}/solr-{{ solr_version }}.tgz"
        dest: ./solr.tgz
        checksum: "sha512:{{ solr_src_sha512 }}"
    - name: strip contrib, dist and example directory from archive
      shell: cat ./solr.tgz | gunzip | tar --delete --wildcards solr*/contrib solr*/dist solr*/example | gzip > ./solr-small.tgz
